<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-deep-dives/jetstream/troubleshooting" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Troubleshooting Jetstream | Experimenter Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://experimenter.info/deep-dives/jetstream/troubleshooting"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Troubleshooting Jetstream | Experimenter Docs"><meta data-rh="true" name="description" content="How can I see what Jetstream is doing?"><meta data-rh="true" property="og:description" content="How can I see what Jetstream is doing?"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://experimenter.info/deep-dives/jetstream/troubleshooting"><link data-rh="true" rel="alternate" href="https://experimenter.info/deep-dives/jetstream/troubleshooting" hreflang="en"><link data-rh="true" rel="alternate" href="https://experimenter.info/deep-dives/jetstream/troubleshooting" hreflang="x-default"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.bb172d27.css">
<link rel="preload" href="/assets/js/runtime~main.3f33d2ba.js" as="script">
<link rel="preload" href="/assets/js/main.a8034749.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Experimenter Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo-dark.svg" alt="Experimenter Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Mozilla Experimentation and Feature Delivery</b></a></div><div class="navbar__items navbar__items--right"><a href="https://experimenter.services.mozilla.com/nimbus/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Nimbus<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://mozilla-hub.atlassian.net/wiki/spaces/PXI/pages/426934273/Nimbus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Confluence<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/mozilla/experimenter-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/">Welcome</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/whats-news/2024-Q1">What&#x27;s Newsletter</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/access">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/workflow/overview">Experimentation Workflow</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/deep-dives/jetstream/overview">Deep Dives</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/deep-dives/jetstream/overview">Jetstream</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/deep-dives/jetstream/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/deep-dives/jetstream/metrics">Metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/deep-dives/jetstream/statistics">Statistics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/deep-dives/jetstream/outcomes">Outcomes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/deep-dives/jetstream/configuration">Configuring Jetstream</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/deep-dives/jetstream/data-products">Data products</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/deep-dives/jetstream/operations">Architecture and Operations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/deep-dives/jetstream/troubleshooting">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/deep-dives/jetstream/testing">Testing Jetstream Configs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/deep-dives/jetstream/adding-a-platform">Adding a Platform</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a href="https://github.com/mozilla/jetstream" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK" tabindex="0">Jetstream GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/bucketing">Data topics</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/desktop-enroll-locally">Desktop topics</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/mobile-behavioral-targeting">Mobile topics</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/deep-dives/experimenter/branches-page">Experimenter topics</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/client-sdk-states-and-lifecycle">Specifications</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cookbook/fml/fml-cookbook">Experimentation Cookbook</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/faq/general-faq">FAQ</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/glossary">Glossary</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/integration-tests">Additional Links</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Deep Dives</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Jetstream</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Troubleshooting</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Troubleshooting Jetstream</h1></header><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-can-i-see-what-jetstream-is-doing">How can I see what Jetstream is doing?<a href="#how-can-i-see-what-jetstream-is-doing" class="hash-link" aria-label="Direct link to How can I see what Jetstream is doing?" title="Direct link to How can I see what Jetstream is doing?">​</a></h3><p>For checking on daily Jetstream runs, the <code>jetstream</code> DAG can be viewed via the <a href="https://workflow.telemetry.mozilla.org/tree?dag_id=jetstream" target="_blank" rel="noopener noreferrer">Airflow Web UI</a>. This show whether the run is still in progress or has completed.</p><p>For checking on reruns after a config change, the <a href="https://app.circleci.com/pipelines/github/mozilla/metric-hub?branch=main" target="_blank" rel="noopener noreferrer">metric-hub CI</a> will show all active runs and indicate whether a rerun has been successful or if there have been any errors.</p><p>For viewing the Argo workflows Jetstream is running, connect to the Argo dashboard by running:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">gcloud container clusters get-credentials jetstream --zone us-central1-a --project moz-fx-data-experiments &amp;&amp; kubectl port-forward --namespace argo $(kubectl get pod --namespace argo --selector=&#x27;app=argo-server&#x27; --output jsonpath=&#x27;{.items[0].metadata.name}&#x27;) 8080:2746</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The dashboard can than be accessed via <a href="http://127.0.0.1:8080" target="_blank" rel="noopener noreferrer">127.0.0.1:8080</a> through the web browser and provides a detailed overview of past workflows, the statuses of each step in a workflow and container logs.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-do-i-know-if-something-went-wrong">How do I know if something went wrong?<a href="#how-do-i-know-if-something-went-wrong" class="hash-link" aria-label="Direct link to How do I know if something went wrong?" title="Direct link to How do I know if something went wrong?">​</a></h3><p>Jetstream logs errors to the console and, optionally, to the <code>monitoring.logs</code> BigQuery table. Logging to BigQuery is enabled by default when running Jetstream via Airflow, as it allows for better alerting and monitoring of errors. It is by default disabled for runs triggered via the metric-hub CI.</p><p>Errors can be viewed on the <a href="https://mozilla.cloud.looker.com/dashboards/246" target="_blank" rel="noopener noreferrer">Jetstream error dashboard</a> in Looker.</p><p>Additionally, alerts can be set up in Looker to check for errors daily and sent an email if failures have been detected. To subscribe to these alerts, go to the <a href="https://mozilla.cloud.looker.com/dashboards/246" target="_blank" rel="noopener noreferrer">Jetstream error dashboard</a>, click on the <em>Alerts</em> (bell) icon on the <em>Critical Errors Last Run</em> tiles and follow the &quot;Error Count&quot; alert.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="something-went-wrong-what-do-i-do">Something went wrong, what do I do?<a href="#something-went-wrong-what-do-i-do" class="hash-link" aria-label="Direct link to Something went wrong, what do I do?" title="Direct link to Something went wrong, what do I do?">​</a></h3><ol><li>Check the <a href="https://mozilla.cloud.looker.com/dashboards/246" target="_blank" rel="noopener noreferrer">Jetstream error dashboard</a> for more details on the error that occurred.</li><li>If the experiment uses a custom configuration, make sure the configuration is valid. Sometimes, SQL written for specifying metrics in the configuration file can contain logical errors that result in failures when computing statistics.<ul><li>It is possible that SQL that was once valid starts to fail, because the query has become too complex. This can happen if new fields get added to a table that is being queried. In these cases, try to rewrite and simplify the SQL query or consider using source tables instead of derived views. </li></ul></li></ol><p>If you are unsure of what might have gone wrong or what to, you can open <a href="https://jira.mozilla.com/projects/CIRRUS/issues/CIRRUS-68?filter=allopenissues" target="_blank" rel="noopener noreferrer">an issue in Jira</a> or ask for help in the <a href="https://mozilla.slack.com/archives/CF94YGE03" target="_blank" rel="noopener noreferrer">#ask-experimenter</a> Slack channel.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="some-results-appear-to-be-missing">Some results appear to be missing<a href="#some-results-appear-to-be-missing" class="hash-link" aria-label="Direct link to Some results appear to be missing" title="Direct link to Some results appear to be missing">​</a></h3><p>It can take up to 2 days for results of the overall time period to be available after an experiment ends. For example, if an experiment ends on 2021-04-05, then results for the overall time period will be computed in the next daily analysis run on 2021-04-06. As running the analysis can take a few hours to complete results will be available on 2021-04-07.</p><p>If results other than for the overall period are missing or more than 2 days have passed and no overall results are available, check the <a href="https://mozilla.cloud.looker.com/dashboards/246" target="_blank" rel="noopener noreferrer">Jetstream error dashboard</a> if there are any analysis errors for your experiment.</p><p>If there have been no errors, or the errors cannot be resolved, open <a href="https://jira.mozilla.com/projects/CIRRUS/issues/CIRRUS-68?filter=allopenissues" target="_blank" rel="noopener noreferrer">an issue in Jira</a> or ask for help in the <a href="https://mozilla.slack.com/archives/CF94YGE03" target="_blank" rel="noopener noreferrer">#ask-experimenter</a> Slack channel.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-do-i-debug-operational-or-more-complex-errors">How do I debug operational or more complex errors?<a href="#how-do-i-debug-operational-or-more-complex-errors" class="hash-link" aria-label="Direct link to How do I debug operational or more complex errors?" title="Direct link to How do I debug operational or more complex errors?">​</a></h3><p>Debugging operational or more complex errors is usually done by Jetstream engineers.</p><ol><li>Check the <a href="https://mozilla.cloud.looker.com/dashboards/246" target="_blank" rel="noopener noreferrer">Jetstream error dashboard</a> for more details on the error that occurred.</li><li>To get more detailed logs or view each individual workflow step, connect to the Argo dashboard and navigate to the workflow where errors might have occurred.</li><li>Once errors have been resolved, to rerun affected experiments for the date when they failed make sure to install the Jetstream CLI locally and execute: <code>jetstream run-argo --date=2021-04-26 --experiment_slug=bug-1695015-pref-new-tab-modernized-ux-region-1-release-86-88</code>. For example: <code>jetstream run-argo --date=2021-04-26 --experiment_slug=bug-1695015-pref-new-tab-modernized-ux-region-1-release-86-88</code></li></ol><p>The logs can indicate a couple of different problems:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="there-has-been-a-operational-error-related-to-kubernetes">There has been a operational error related to Kubernetes<a href="#there-has-been-a-operational-error-related-to-kubernetes" class="hash-link" aria-label="Direct link to There has been a operational error related to Kubernetes" title="Direct link to There has been a operational error related to Kubernetes">​</a></h4><p>This could happen, for example, if available memory or CPUs have been exceeded. To get more information about the pods that failed, navigate to the <a href="https://console.cloud.google.com/kubernetes/workload?project=moz-fx-data-experiments&amp;pageState=(%22savedViews%22:(%22i%22:%22bf4f1f5805924fe2ba1cd23bd3b0ef8b%22,%22c%22:%5B%22gke%2Fus-central1-a%2Fjetstream%22%5D,%22n%22:%5B%5D))" target="_blank" rel="noopener noreferrer"><code>jetstream</code> Kubernetes cluster in the GCP web console</a>. The web UI allows to view the memory and CPU usage of specific pods or the entire cluster as well as pod logs. This information can help to decide whether the cluster needs to be resized. Resizing the cluster or allocating more resources is worth considering if these errors happen frequently. For occasional failures, simply rerunning the affected experiment is sufficient.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="an-external-config-or-outcome-definition-is-causing-failures">An external config or outcome definition is causing failures<a href="#an-external-config-or-outcome-definition-is-causing-failures" class="hash-link" aria-label="Direct link to An external config or outcome definition is causing failures" title="Direct link to An external config or outcome definition is causing failures">​</a></h4><ol><li>Ensure that the config is valid and that SQL does not contain any logical errors.</li><li>If the SQL has become too complex, try to simplify queries or use source tables instead of derived views.</li><li>Fix the configuration. Once the new config gets merge, the experiment will be rerun automatically.
</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="there-has-been-an-error-because-of-a-timeout-when-using-an-external-api">There has been an error because of a timeout when using an external API.<a href="#there-has-been-an-error-because-of-a-timeout-when-using-an-external-api" class="hash-link" aria-label="Direct link to There has been an error because of a timeout when using an external API." title="Direct link to There has been an error because of a timeout when using an external API.">​</a></h4><p>Timeouts occasionally happen when running queries in BigQuery, fetching experiments from the Experimenter API or fetching config files from GitHub. Jetstream implements a retry mechanism for most of these cases but it is possible that all of these retries fail. Rerunning affected experiments should in most cases resolve these issues. However, if this failures keep happening then this could indicate API changes.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="there-is-a-bug-in-the-jetstream-code-base">There is a bug in the jetstream code base<a href="#there-is-a-bug-in-the-jetstream-code-base" class="hash-link" aria-label="Direct link to There is a bug in the jetstream code base" title="Direct link to There is a bug in the jetstream code base">​</a></h4><ol><li>Add a test case to <a href="https://github.com/mozilla/jetstream" target="_blank" rel="noopener noreferrer">jetstream</a> to reproduce the error.</li><li>Fix the bug and open a PR against the repository.</li><li>Once the fix has been approved, merged and deployed, the affected experiment can be rerun.</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="airflow-returned-an-error-or-is-sending-notification-emails">Airflow returned an error or is sending notification emails<a href="#airflow-returned-an-error-or-is-sending-notification-emails" class="hash-link" aria-label="Direct link to Airflow returned an error or is sending notification emails" title="Direct link to Airflow returned an error or is sending notification emails">​</a></h4><ol><li>Check the Airflow logs</li><li>Errors in Airflow can happen if there has been a problem with the Airflow cluster itself, e.g. the jetstream tasks could not be started. In this case, clearing the affected task to trigger a rerun should fix the issue. If problems persist, then reach out to data ops by <a href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Data%20Platform%20and%20Tools" target="_blank" rel="noopener noreferrer">opening a Bugzilla ticket</a>.</li><li>Airflow failures can also occur if the analysis workflow could not be started. For example, if connecting to the Argo cluster failed. Check if the <code>jetstream</code> cluster is in a healthy state and if the analysis run can be started using a locally installed Jetstream CLI.</li><li>The Jetstream DAG has some upstream dependencies that need to successfully complete in order for jetstream to run. If one of these upstream dependencies fails, then Airflow will keep sending email alerts with <code>up_for_retry</code> in the subject. Failures in the upstream dependencies need to be resolved before jetstream can run. Check for the owner of the upstream task that failed and open a <a href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Data%20Platform%20and%20Tools" target="_blank" rel="noopener noreferrer">Bugzilla ticket</a> with the owner tagged.</li></ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/mozilla/experimenter-docs/edit/main/docs/deep-dives/jetstream/troubleshooting.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/deep-dives/jetstream/operations"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Architecture and Operations</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/deep-dives/jetstream/testing"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Testing Jetstream Configs</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-can-i-see-what-jetstream-is-doing" class="table-of-contents__link toc-highlight">How can I see what Jetstream is doing?</a></li><li><a href="#how-do-i-know-if-something-went-wrong" class="table-of-contents__link toc-highlight">How do I know if something went wrong?</a></li><li><a href="#something-went-wrong-what-do-i-do" class="table-of-contents__link toc-highlight">Something went wrong, what do I do?</a></li><li><a href="#some-results-appear-to-be-missing" class="table-of-contents__link toc-highlight">Some results appear to be missing</a></li><li><a href="#how-do-i-debug-operational-or-more-complex-errors" class="table-of-contents__link toc-highlight">How do I debug operational or more complex errors?</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Mozilla Corporation</div></div></div></footer></div>
<script src="/assets/js/runtime~main.3f33d2ba.js"></script>
<script src="/assets/js/main.a8034749.js"></script>
</body>
</html>