<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<link rel="search" type="application/opensearchdescription+xml" title="Experimenter Docs" href="/opensearch.xml"><title data-react-helmet="true">Testing the preview flow on iOS | Experimenter Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://experimenter.info/ios-preview-testing"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Testing the preview flow on iOS | Experimenter Docs"><meta data-react-helmet="true" name="description" content="Launching an experiment to Preview the stage server"><meta data-react-helmet="true" property="og:description" content="Launching an experiment to Preview the stage server"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://experimenter.info/ios-preview-testing"><link data-react-helmet="true" rel="alternate" href="https://experimenter.info/ios-preview-testing" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://experimenter.info/ios-preview-testing" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.431b19db.css">
<link rel="preload" href="/assets/js/runtime~main.6807d73b.js" as="script">
<link rel="preload" href="/assets/js/main.428b1294.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Experimenter Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo-dark.svg" alt="Experimenter Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Experimenter Docs</b></a></div><div class="navbar__items navbar__items--right"><a href="https://experimenter.services.mozilla.com/nimbus/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Nimbus<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://mana.mozilla.org/wiki/display/FJT/Project+Nimbus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Mana<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/mozilla/experimenter-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting Started</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Experiment Owners</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Data Scientists</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Firefox for Android</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Firefox for iOS</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/feature-variables-and-me">Feature Variables API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ios-custom-targeting">Adding custom targeting attributes</a></li><li class="menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ios-preview-testing">Testing the preview flow on iOS</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Firefox for Desktop</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Jetstream</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Core Nimbus Team</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_1CGd"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_3E-R"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1>Testing the preview flow on iOS</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="launching-an-experiment-to-preview-the-stage-server"></a>Launching an experiment to Preview the stage server<a class="hash-link" href="#launching-an-experiment-to-preview-the-stage-server" title="Direct link to heading">#</a></h2><p>The first step to testing the preview flow is to launch an experiment
to preview on the stage nimbus server (we should not using the production server for testing). Go to the <a href="https://stage.experimenter.nonprod.dataops.mozgcp.net/nimbus/" target="_blank" rel="noopener noreferrer">stage experimenter</a> and create your experiment there.</p><p>Follow the first few instructions on <a href="/experiment-owners/preview">the preview docs</a> to get an experiment to preview. (note that the experiment should be set to target iOS, look at the <a href="#faq">FAQ</a> section at the bottom)</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="pointing-a-local-ios-build-to-the-stage-server"></a>Pointing a local iOS build to the stage server<a class="hash-link" href="#pointing-a-local-ios-build-to-the-stage-server" title="Direct link to heading">#</a></h2><p>Since we will be using the stage server, we want Firefox to look for experiments there. For iOS, you can do that on a local build, which you can get running by <a href="https://github.com/mozilla-mobile/firefox-ios/blob/main/README.md#building-the-code" target="_blank" rel="noopener noreferrer">following the instructions on the <code>firefox-ios</code> repository</a></p><p>Once you have a local build using xcode, you should replace <code>NIMBUS_URL</code> with <code>https://settings.stage.mozaws.net/v1/</code>. You can set that on <code>info.plist</code>, which lies in the <code>Client</code> directory once you have the project setup. <code>NIMBUS_URL</code> will have an initial value of <code>$(NIMBUS_URL)</code>, replace that with the setting server&#x27;s url.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="accessing-the-secret-menu"></a>Accessing the secret menu<a class="hash-link" href="#accessing-the-secret-menu" title="Direct link to heading">#</a></h2><p>At this point, you can run your local build of Firefox iOS, once it&#x27;s run:</p><ol><li><p>Access the settings menu and click <strong>5</strong> times on the <code>Firefox Daylight 0.0.1</code> under the about section:</p><img src="/img/firefox-ios/secret-menu-access.png" height="500"></li><li><p>Scroll all the way to the bottom and click the <code>Experiments</code> menu.</p></li><li><p>Click on <code>Edit</code> on the top right.</p></li><li><p>Choose the <code>Use Preview Collection (requires restart)</code> option.</p></li><li><p>Click <code>Reset</code> and restart the app.</p></li><li><p>Repeat the steps 1-2, and you should now see the experiment you launched to preview!</p></li></ol><p>You can also check out this <a href="https://docs.google.com/document/d/1XPF4TQQTxRwWDrp907JtWXi4rCJ0Pg1YOpFGCHz8sBc/edit#" target="_blank" rel="noopener noreferrer">visual documentation</a> for a clear demonstration of how to switch to the preview collection.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="faqs"></a>FAQs<a class="hash-link" href="#faqs" title="Direct link to heading">#</a></h3><ul><li><strong>What kind of experiment should I create?</strong></li></ul><p>If you would like your test to be more in-depth, we recommend you create an iOS experiment that can be directly tested on the UI. For example, you can create an <code>onboarding-default-browser</code> experiment by setting the feature config to <code>onboarding-default-browser</code> and setting the appropriate values, <a href="https://stage.experimenter.nonprod.dataops.mozgcp.net/nimbus/teshaqtest-preview-flow-showhide-default-browser-title-image" target="_blank" rel="noopener noreferrer">check out this experiment on experimenter for a complete example</a></p><ul><li><strong>I don&#x27;t see my experiments on Firefox!</strong></li></ul><p>It takes a little time, but if you still can&#x27;t see the experiments, try restarting the app and double check that you launched your experiment to preview and set the <code>Application</code> to <code>Firefox iOS</code> and didn&#x27;t miss any configuration on experimenter. If you keep facing trouble reach out to use on #ask-experimenter on slack!</p></div><footer class="docusaurus-mt-lg"><div class="row"><div class="col"><a href="https://github.com/mozilla/experimenter-docs/edit/main/docs/ios-preview-testing.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/android-frontend-testing"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Testing on mobile</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/desktop-feature-api"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Nimbus Feature API (JS and C++) »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#launching-an-experiment-to-preview-the-stage-server" class="table-of-contents__link">Launching an experiment to Preview the stage server</a></li><li><a href="#pointing-a-local-ios-build-to-the-stage-server" class="table-of-contents__link">Pointing a local iOS build to the stage server</a></li><li><a href="#accessing-the-secret-menu" class="table-of-contents__link">Accessing the secret menu</a><ul><li><a href="#faqs" class="table-of-contents__link">FAQs</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 Mozilla Corporation</div></div></div></footer></div>
<script src="/assets/js/runtime~main.6807d73b.js"></script>
<script src="/assets/js/main.428b1294.js"></script>
</body>
</html>