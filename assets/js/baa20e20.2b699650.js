"use strict";(globalThis.webpackChunkexperimenter_docs=globalThis.webpackChunkexperimenter_docs||[]).push([[7246],{5680(e,t,n){n.d(t,{xA:()=>p,yg:()=>d});var o=n(6540);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=o.createContext({}),u=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=u(e.components);return o.createElement(s.Provider,{value:t},e.children)},g={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),m=u(n),d=a,y=m["".concat(s,".").concat(d)]||m[d]||g[d]||r;return n?o.createElement(y,l(l({ref:t},p),{},{components:n})):o.createElement(y,l({ref:t},p))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,l=new Array(r);l[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:a,l[1]=i;for(var u=2;u<r;u++)l[u]=n[u];return o.createElement.apply(null,l)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},9020(e,t,n){n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>g,frontMatter:()=>r,metadata:()=>i,toc:()=>u});var o=n(8168),a=(n(6540),n(5680));const r={id:"rollouts-deep-dive",title:"Rollouts",slug:"/advanced/rollouts"},l="Rollouts",i={unversionedId:"advanced/rollouts-deep-dive",id:"advanced/rollouts-deep-dive",title:"Rollouts",description:"Want more info on rollouts?",source:"@site/docs/advanced/rollouts.mdx",sourceDirName:"advanced",slug:"/advanced/rollouts",permalink:"/advanced/rollouts",draft:!1,editUrl:"https://github.com/mozilla/experimenter-docs/edit/main/docs/advanced/rollouts.mdx",tags:[],version:"current",frontMatter:{id:"rollouts-deep-dive",title:"Rollouts",slug:"/advanced/rollouts"},sidebar:"sidebar",previous:{title:"Experiments",permalink:"/workflow/experiments"},next:{title:"Firefox Labs",permalink:"/workflow/firefox-labs"}},s={},u=[{value:"When to use a rollout",id:"when-to-use-a-rollout",level:2},{value:"When not to use a rollout",id:"when-not-to-use-a-rollout",level:2},{value:"How rollouts work",id:"how-rollouts-work",level:2},{value:"Rollout lifecycle",id:"rollout-lifecycle",level:3},{value:"Interaction with experiments",id:"interaction-with-experiments",level:3},{value:"Pref conflict handling",id:"pref-conflict-handling",level:3},{value:"Creating a rollout",id:"creating-a-rollout",level:2},{value:"Promote from an existing experiment",id:"promote-from-an-existing-experiment",level:3},{value:"Create manually",id:"create-manually",level:3},{value:"Managing a live rollout",id:"managing-a-live-rollout",level:2},{value:"Live editability",id:"live-editability",level:3},{value:"Requesting an update",id:"requesting-an-update",level:3},{value:"Staged rollout patterns",id:"staged-rollout-patterns",level:3},{value:"Running an experiment and rollout simultaneously",id:"running-an-experiment-and-rollout-simultaneously",level:2},{value:"Things to consider first",id:"things-to-consider-first",level:3},{value:"Steps",id:"steps",level:3},{value:"Finding rollouts",id:"finding-rollouts",level:2},{value:"Supported platforms and minimum versions",id:"supported-platforms-and-minimum-versions",level:2},{value:"Monitoring",id:"monitoring",level:2},{value:"FAQ",id:"faq",level:2}],p={toc:u};function g(e){let{components:t,...n}=e;return(0,a.yg)("wrapper",(0,o.A)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.yg)("h1",{id:"rollouts"},"Rollouts"),(0,a.yg)("admonition",{type:"tip"},(0,a.yg)("p",{parentName:"admonition"},"Want more info on rollouts?\nReach out to us in ",(0,a.yg)("a",{parentName:"p",href:"https://mozilla.slack.com/archives/CF94YGE03"},(0,a.yg)("inlineCode",{parentName:"a"},"#ask-experimenter"))," on Slack.")),(0,a.yg)("p",null,"A rollout is a single-branch Nimbus delivery used to ship a feature configuration to users without running a controlled experiment. Rollouts differ from experiments in several key ways:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"A rollout has ",(0,a.yg)("strong",{parentName:"li"},"only one branch")," \u2014 there is no control group."),(0,a.yg)("li",{parentName:"ul"},"A client can be enrolled in both an experiment ",(0,a.yg)("strong",{parentName:"li"},"and")," a rollout for the same feature simultaneously."),(0,a.yg)("li",{parentName:"ul"},"When both are active, the ",(0,a.yg)("strong",{parentName:"li"},"experiment takes precedence")," over the rollout."),(0,a.yg)("li",{parentName:"ul"},"Rollouts use ",(0,a.yg)("strong",{parentName:"li"},"separate bucketing")," from experiments, so their populations don't collide."),(0,a.yg)("li",{parentName:"ul"},"Rollouts are ",(0,a.yg)("strong",{parentName:"li"},"not measurement tools")," \u2014 there is no comparison branch, no results page, and no data science analysis. You can monitor rollouts via OpMon dashboards, which provide raw data without statistical comparison.")),(0,a.yg)("h2",{id:"when-to-use-a-rollout"},"When to use a rollout"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Launching a winning branch")," of an experiment faster than the trains."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Launching a configuration")," to non-experiment users during an experiment after a short period of verification."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Configuring different settings")," for a feature for different audiences remotely."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},'A "kill switch"')," if you want to launch a feature but then turn it off if something goes wrong.")),(0,a.yg)("h2",{id:"when-not-to-use-a-rollout"},"When not to use a rollout"),(0,a.yg)("p",null,"Rollouts are designed to deliver feature changes, not to learn from them. If your goal is learning, consider these alternatives:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Use an ",(0,a.yg)("a",{parentName:"strong",href:"/workflow/experiments"},"experiment")," instead")," if you need to measure the causal impact of a change, compare multiple approaches, or gather statistically significant data to make a decision. Experiments give you a control group, results analysis, and data science support \u2014 rollouts do not."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Use ",(0,a.yg)("a",{parentName:"strong",href:"/workflow/firefox-labs"},"Firefox Labs")," instead")," if the feature is early-stage, not yet production quality, or you want qualitative feedback from a small group of opt-in early adopters before committing to a broader launch. Labs is designed for incubation \u2014 it's okay if the feature is incomplete or buggy.")),(0,a.yg)("h2",{id:"how-rollouts-work"},"How rollouts work"),(0,a.yg)("h3",{id:"rollout-lifecycle"},"Rollout lifecycle"),(0,a.yg)("p",null,"Rollouts have a simpler lifecycle than experiments:"),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Draft")," \u2014 Configure the rollout"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Review")," \u2014 Submit for review and approval"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Live (Enrolling)")," \u2014 Clients matching targeting are enrolled"),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Complete")," \u2014 Rollout is ended")),(0,a.yg)("p",null,"Unlike experiments, rollouts ",(0,a.yg)("strong",{parentName:"p"},"skip the observation phase"),". When you end a rollout, it goes directly from Live to Complete. Rollouts also ",(0,a.yg)("strong",{parentName:"p"},"cannot end enrollment")," independently \u2014 the only way to stop a rollout is to end it entirely. (The exception is ",(0,a.yg)("a",{parentName:"p",href:"/workflow/firefox-labs"},"Firefox Labs")," rollouts, which support ending enrollment for feature graduation.)"),(0,a.yg)("h3",{id:"interaction-with-experiments"},"Interaction with experiments"),(0,a.yg)("p",null,"A client can be in both an experiment and a rollout for the same feature at the same time. The client tracks rollout and experiment enrollment separately, so they don't interfere with each other's bucketing."),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"The ",(0,a.yg)("strong",{parentName:"li"},"experiment always takes precedence")," \u2014 if a user is in both, they see the experiment's feature configuration while it's active."),(0,a.yg)("li",{parentName:"ul"},"When the experiment ends, the client unenrolls and on the next recipe evaluation will pick up the rollout configuration.")),(0,a.yg)("admonition",{type:"warning"},(0,a.yg)("p",{parentName:"admonition"},"If you run both an experiment and a rollout on the same feature, be aware that experiment users won't see the rollout configuration until the experiment ends. Plan your timelines accordingly.")),(0,a.yg)("admonition",{type:"note"},(0,a.yg)("p",{parentName:"admonition"},(0,a.yg)("strong",{parentName:"p"},"Mobile messaging exception:")," On mobile, if both an experiment and rollout target the same messaging feature, the client will actually be enrolled in both and receive the ",(0,a.yg)("strong",{parentName:"p"},"combined"),' configuration. If they target different fields in the JSON, the user gets "experiment + rollout" while both are active, then "rollout only" when the experiment ends.')),(0,a.yg)("h3",{id:"pref-conflict-handling"},"Pref conflict handling"),(0,a.yg)("p",null,"For rollouts that set Firefox preferences, Experimenter automatically enables the ",(0,a.yg)("strong",{parentName:"p"},'"Prevent enrollment if users have changed any prefs"')," setting. This is forced for all rollouts and cannot be disabled. It prevents users who have manually changed a pref set by the rollout from being re-enrolled, which would override their manual preference changes."),(0,a.yg)("p",null,"If you're creating an experiment that also has this setting enabled on the same feature as a live rollout, Experimenter will warn you about potential pref targeting collisions."),(0,a.yg)("h2",{id:"creating-a-rollout"},"Creating a rollout"),(0,a.yg)("p",null,"There are two ways to create a rollout in Experimenter:"),(0,a.yg)("h3",{id:"promote-from-an-existing-experiment"},"Promote from an existing experiment"),(0,a.yg)("p",null,'To create a rollout from a "winning branch" of an in-flight experiment, use the ',(0,a.yg)("strong",{parentName:"p"},"Promote to Rollout")," buttons on the experiment's Summary page. This clones the selected branch into a new rollout, resetting the population percentage to 0% and the duration/enrollment to defaults."),(0,a.yg)("img",{title:"Promote to rollout buttons",src:"/img/deep-dives/promote-to-rollout-buttons.png",align:"center"}),(0,a.yg)("h3",{id:"create-manually"},"Create manually"),(0,a.yg)("p",null,"Create a new item through the ",(0,a.yg)("strong",{parentName:"p"},"Create new")," button on the Experimenter home screen, then check the ",(0,a.yg)("strong",{parentName:"p"},'"This is a rollout"')," box on the Branches page:"),(0,a.yg)("img",{title:"Rollout checkbox",src:"/img/deep-dives/rollout-checkbox.png",align:"center"}),(0,a.yg)("h2",{id:"managing-a-live-rollout"},"Managing a live rollout"),(0,a.yg)("h3",{id:"live-editability"},"Live editability"),(0,a.yg)("p",null,"Once a rollout is launched, the only field you can edit is the ",(0,a.yg)("strong",{parentName:"p"},"population percentage"),' ("Percentage of clients" on the Audience page). All other fields are locked.'),(0,a.yg)("p",null,"To change the population percentage:"),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},"Open your rollout and click ",(0,a.yg)("strong",{parentName:"li"},"Audience")," in the left sidebar."),(0,a.yg)("li",{parentName:"ol"},'Edit the "Percentage of clients" field and save.')),(0,a.yg)("img",{title:"Population percent field is editable",src:"/img/deep-dives/population-percent-editable.png"}),(0,a.yg)("h3",{id:"requesting-an-update"},"Requesting an update"),(0,a.yg)("p",null,"After editing the population percentage, your rollout enters an ",(0,a.yg)("strong",{parentName:"p"},"unpublished changes"),' state (shown by a red "Unpublished changes" badge near the Timeline). You can make multiple edits before requesting review.'),(0,a.yg)("img",{title:"Unpublished changes status pill",src:"/img/deep-dives/unpublished-changes-pill.png",height:"200"}),(0,a.yg)("p",null,"When you're ready, click the ",(0,a.yg)("strong",{parentName:"p"},"Request Update")," button on the Summary page (it's only enabled when there are unpublished changes):"),(0,a.yg)("img",{title:"Request a live update button",src:"/img/deep-dives/request-live-update.png"}),(0,a.yg)("p",null,"This triggers the same review flow as launching: approval on Experimenter, then approval on Remote Settings."),(0,a.yg)("img",{title:"Live update review flow",src:"/img/deep-dives/live-update-review.png"}),(0,a.yg)("h3",{id:"staged-rollout-patterns"},"Staged rollout patterns"),(0,a.yg)("p",null,"This document covers ",(0,a.yg)("a",{parentName:"p",href:"https://docs.google.com/document/d/1aAlZa5RoZt_yf3-XUtffJwKVBczhJMcHCAPxRxHrNb8/edit"},"common patterns for people using a rollout to mitigate risk around technical issues, brand perception, and load capacity/service scaling"),"."),(0,a.yg)("p",null,"See also the ",(0,a.yg)("a",{parentName:"p",href:"/faq/rollouts"},"Rollouts FAQ")," for guidance on sizing steps and speed."),(0,a.yg)("h2",{id:"running-an-experiment-and-rollout-simultaneously"},"Running an experiment and rollout simultaneously"),(0,a.yg)("p",null,"Yes, but remember that only the experiment will produce measurable results \u2014 the rollout is just delivering the feature. If you have uncertainty about the effect of the feature, you may wish to be guided by experiment results instead of deploying the feature immediately."),(0,a.yg)("h3",{id:"things-to-consider-first"},"Things to consider first"),(0,a.yg)("admonition",{type:"tip"},(0,a.yg)("mdxAdmonitionTitle",{parentName:"admonition"},"[Future experimentation needs]"),(0,a.yg)("p",{parentName:"admonition"},"Once you deploy the feature to someone, you lose the ability to observe what happens when you introduce that feature to that user. Consider whether you have a need for holdbacks.")),(0,a.yg)("admonition",{type:"tip"},(0,a.yg)("mdxAdmonitionTitle",{parentName:"admonition"},"[Decision criteria]"),(0,a.yg)("ul",{parentName:"admonition"},(0,a.yg)("li",{parentName:"ul"},"Identify the risks you're trying to mitigate and decide whether you need multiple stages."),(0,a.yg)("li",{parentName:"ul"},"If you have multiple stages, how will you know whether to advance or roll back?"),(0,a.yg)("li",{parentName:"ul"},"What signals will help you make your decision? Where will they come from?"),(0,a.yg)("li",{parentName:"ul"},"If you are relying on the experiment to guide you, make sure the timelines are compatible."))),(0,a.yg)("h3",{id:"steps"},"Steps"),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Launch the experiment")," targeting a fixed portion of the population, sized appropriately for whatever you are trying to measure."),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Launch the rollout")," at a low percentage of the remaining population when you are ready."),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Increment gradually")," \u2014 as the rollout proceeds, consult your decision criteria and adjust the population percentage via ",(0,a.yg)("a",{parentName:"li",href:"#live-editability"},"live editability"),".")),(0,a.yg)("p",null,"Keep in mind that if you plan to release the experience to 100% of users, you should make sure it meets production quality standards."),(0,a.yg)("h2",{id:"finding-rollouts"},"Finding rollouts"),(0,a.yg)("p",null,'Use the filters on the Experimenter home page. You can sort by feature to see all experiments/rollouts for a given feature, or filter by type to show only "rollout":'),(0,a.yg)("img",{title:"Home page filters",src:"/img/deep-dives/home-filters.png",height:"500"}),(0,a.yg)("h2",{id:"supported-platforms-and-minimum-versions"},"Supported platforms and minimum versions"),(0,a.yg)("p",null,"Rollouts are supported on all Nimbus platforms with the following minimum Firefox versions:"),(0,a.yg)("table",null,(0,a.yg)("thead",{parentName:"table"},(0,a.yg)("tr",{parentName:"thead"},(0,a.yg)("th",{parentName:"tr",align:"left"},"Platform"),(0,a.yg)("th",{parentName:"tr",align:"left"},"Minimum Version"))),(0,a.yg)("tbody",{parentName:"table"},(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:"left"},"Desktop"),(0,a.yg)("td",{parentName:"tr",align:"left"},"115")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:"left"},"Fenix (Firefox for Android)"),(0,a.yg)("td",{parentName:"tr",align:"left"},"116")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:"left"},"Firefox iOS"),(0,a.yg)("td",{parentName:"tr",align:"left"},"116")))),(0,a.yg)("h2",{id:"monitoring"},"Monitoring"),(0,a.yg)("p",null,"Rollouts do not generate a results page or statistical analysis. Instead, you can monitor rollouts using ",(0,a.yg)("strong",{parentName:"p"},"OpMon (Operational Monitoring)")," dashboards, which provide raw telemetry data without comparison to a control group."),(0,a.yg)("p",null,"OpMon dashboards for rollouts follow this URL pattern:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"https://mozilla.cloud.looker.com/dashboards/operational_monitoring::<slug_with_underscores>\n")),(0,a.yg)("h2",{id:"faq"},"FAQ"),(0,a.yg)("p",null,"See the ",(0,a.yg)("a",{parentName:"p",href:"/faq/rollouts"},"Rollouts FAQ")," for common questions about rollout management, sizing, timing, and interaction with experiments."))}g.isMDXComponent=!0}}]);