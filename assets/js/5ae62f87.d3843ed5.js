"use strict";(self.webpackChunkexperimenter_docs=self.webpackChunkexperimenter_docs||[]).push([[7048],{4137:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>h});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var d=a.createContext({}),p=function(e){var t=a.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},m=function(e){var t=p(e.components);return a.createElement(d.Provider,{value:t},e.children)},s="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},k=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,d=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),s=p(n),k=r,h=s["".concat(d,".").concat(k)]||s[k]||u[k]||l;return n?a.createElement(h,i(i({ref:t},m),{},{components:n})):a.createElement(h,i({ref:t},m))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,i=new Array(l);i[0]=k;var o={};for(var d in t)hasOwnProperty.call(t,d)&&(o[d]=t[d]);o.originalType=e,o[s]="string"==typeof e?e:r,i[1]=o;for(var p=2;p<l;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}k.displayName="MDXCreateElement"},4191:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>u,frontMatter:()=>l,metadata:()=>o,toc:()=>p});var a=n(7462),r=(n(7294),n(4137));const l={id:"telemetry",title:"Telemetry",slug:"/data-analysis/telemetry"},i=void 0,o={unversionedId:"data-analysis/telemetry",id:"data-analysis/telemetry",title:"Telemetry",description:"This section is an overview of Nimbus Telemetry intended for the analysis of experiments.",source:"@site/docs/data-analysis/telemetry.md",sourceDirName:"data-analysis",slug:"/data-analysis/telemetry",permalink:"/data-analysis/telemetry",draft:!1,editUrl:"https://github.com/mozilla/experimenter-docs/edit/main/docs/data-analysis/telemetry.md",tags:[],version:"current",frontMatter:{id:"telemetry",title:"Telemetry",slug:"/data-analysis/telemetry"},sidebar:"sidebar",previous:{title:"Population Representativeness",permalink:"/data-analysis/data-topics/population_representativeness"},next:{title:"Validation",permalink:"/data-analysis/validating-experiments"}},d={},p=[{value:"Standard Events",id:"standard-events",level:2},{value:"Enrollment",id:"enrollment",level:3},{value:"Enroll Failed",id:"enroll-failed",level:3},{value:"Exposure",id:"exposure",level:3},{value:"Disqualification",id:"disqualification",level:3},{value:"Unenrollment",id:"unenrollment",level:3},{value:"Unenroll Failed",id:"unenroll-failed",level:3},{value:"Experiment Annotations",id:"experiment-annotations",level:2}],m={toc:p},s="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(s,(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"This section is an overview of Nimbus Telemetry intended for the analysis of experiments."),(0,r.kt)("h2",{id:"standard-events"},"Standard Events"),(0,r.kt)("p",null,"The following events are sent during an experiment's lifecycle."),(0,r.kt)("p",null,"You can find the manifest entries for these events in ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/mozilla/application-services/blob/main/components/nimbus/metrics.yaml"},"metrics.yaml")," for iOS and Android, and the ",(0,r.kt)("inlineCode",{parentName:"p"},"normandy")," section under ",(0,r.kt)("a",{parentName:"p",href:"https://searchfox.org/mozilla-central/source/toolkit/components/resources/telemetry/Events.yaml"},"Events.yaml")," for Desktop."),(0,r.kt)("h3",{id:"enrollment"},"Enrollment"),(0,r.kt)("p",null,"Recorded when a user has met the conditions and is first bucketed into an experiment (i.e. targeting matched and they were randomized into a bucket and branch of the experiment). Expected a maximum of once per experiment per user."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Android, iOS (",(0,r.kt)("inlineCode",{parentName:"th"},"event.name"),") - Glean"),(0,r.kt)("th",{parentName:"tr",align:null},"Desktop (",(0,r.kt)("inlineCode",{parentName:"th"},"event.method"),") - Legacy"),(0,r.kt)("th",{parentName:"tr",align:null},"Desktop (",(0,r.kt)("inlineCode",{parentName:"th"},"event.name"),") - Glean"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"enrollment")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"enroll")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"enrollment"))))),(0,r.kt)("h3",{id:"enroll-failed"},"Enroll Failed"),(0,r.kt)("p",null,"Recorded when enrollment in an experiment failed for some reason. The\nspecific ",(0,r.kt)("inlineCode",{parentName:"p"},"reason")," is included in the event's ",(0,r.kt)("inlineCode",{parentName:"p"},"extra")," field."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Android, iOS (",(0,r.kt)("inlineCode",{parentName:"th"},"event.name"),") - Glean"),(0,r.kt)("th",{parentName:"tr",align:null},"Desktop (",(0,r.kt)("inlineCode",{parentName:"th"},"event.method"),") - Legacy"),(0,r.kt)("th",{parentName:"tr",align:null},"Desktop (",(0,r.kt)("inlineCode",{parentName:"th"},"event.name"),") - Glean"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"enroll_failed")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"enroll_failed")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"enroll_failed"))))),(0,r.kt)("h3",{id:"exposure"},"Exposure"),(0,r.kt)("p",null,"This should be recorded at the moment the user sees an experiment\ntreatment ",(0,r.kt)("em",{parentName:"p"},"or would have seen it")," if they are in a control branch.\nThe event is triggered either by the code checking that a\ncertain experiment feature is enabled or when that feature value is used.\nThis is different from enrollment or experiment activation because it\nregisters when a user actually gets exposed to the experiment feature."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Exposure is not sent by default in Firefox Desktop. You should call ",(0,r.kt)("a",{parentName:"p",href:"/platform-guides/desktop/feature-api#recordexposureevent"},"recordExposureEvent()"),". See ",(0,r.kt)("a",{parentName:"p",href:"/platform-guides/desktop/feature-api"},"API documentation")," for more info.")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Android, iOS (",(0,r.kt)("inlineCode",{parentName:"th"},"event.name"),") - Glean"),(0,r.kt)("th",{parentName:"tr",align:null},"Desktop (",(0,r.kt)("inlineCode",{parentName:"th"},"event.method"),") - Legacy"),(0,r.kt)("th",{parentName:"tr",align:null},"Desktop (",(0,r.kt)("inlineCode",{parentName:"th"},"event.name"),") - Glean"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"exposure")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"expose")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"exposure"))))),(0,r.kt)("h3",{id:"disqualification"},"Disqualification"),(0,r.kt)("p",null,"Recorded when a user becomes ineligible to continue receiving the\ntreatment for an enrolled experiment, for reasons such as the user\nopting out of the experiment or no longer matching targeting for the\nexperiment. "),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Note: Disqualification will be deprecated in favor of the\n",(0,r.kt)("inlineCode",{parentName:"p"},"enroll_failed")," event being added to the Nimbus SDK used on mobile.")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Android, iOS (",(0,r.kt)("inlineCode",{parentName:"th"},"event.name"),") - Glean"),(0,r.kt)("th",{parentName:"tr",align:null},"Desktop (",(0,r.kt)("inlineCode",{parentName:"th"},"event.method"),") - Legacy"),(0,r.kt)("th",{parentName:"tr",align:null},"Desktop (",(0,r.kt)("inlineCode",{parentName:"th"},"event.name"),") - Glean"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"disqualification")),(0,r.kt)("td",{parentName:"tr",align:null},"Not available"),(0,r.kt)("td",{parentName:"tr",align:null},"Not available")))),(0,r.kt)("h3",{id:"unenrollment"},"Unenrollment"),(0,r.kt)("p",null,"Recorded when the experiment has finished running for its designed duration, or if telemetry is disabled by the user."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Android, iOS (",(0,r.kt)("inlineCode",{parentName:"th"},"event.name"),") - Glean"),(0,r.kt)("th",{parentName:"tr",align:null},"Desktop (",(0,r.kt)("inlineCode",{parentName:"th"},"event.method"),") - Legacy"),(0,r.kt)("th",{parentName:"tr",align:null},"Desktop (",(0,r.kt)("inlineCode",{parentName:"th"},"event.name"),") - Glean"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"unenrollment")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"unenroll")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"unenrollment"))))),(0,r.kt)("h3",{id:"unenroll-failed"},"Unenroll Failed"),(0,r.kt)("p",null,"Recorded when unenrollment in an experiment failed for some reason. The\nspecific ",(0,r.kt)("inlineCode",{parentName:"p"},"reason")," is included in the event's ",(0,r.kt)("inlineCode",{parentName:"p"},"extra")," field."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Android, iOS (",(0,r.kt)("inlineCode",{parentName:"th"},"event.name"),") - Glean"),(0,r.kt)("th",{parentName:"tr",align:null},"Desktop (",(0,r.kt)("inlineCode",{parentName:"th"},"event.method"),") - Legacy"),(0,r.kt)("th",{parentName:"tr",align:null},"Desktop (",(0,r.kt)("inlineCode",{parentName:"th"},"event.name"),") - Glean"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"enroll_failed")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"enroll_failed")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"enroll_failed"))))),(0,r.kt)("h2",{id:"experiment-annotations"},"Experiment Annotations"),(0,r.kt)("p",null,"In addition to the standard Nimbus events that are generated, Nimbus\nalso interacts with both the Legacy Telemetry and the Glean Experiment\nAPI, recording experiment information that is included in the\n",(0,r.kt)("inlineCode",{parentName:"p"},"experiments")," field of the main ping in Legacy, and in the\n",(0,r.kt)("inlineCode",{parentName:"p"},"ping_info.experiments")," field of all Glean pings. The information that\nis recorded in this way includes the experiment slug, the branch slug,\nand the enrollment ID."))}u.isMDXComponent=!0}}]);