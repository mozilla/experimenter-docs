"use strict";(self.webpackChunkexperimenter_docs=self.webpackChunkexperimenter_docs||[]).push([[1459],{4137:(e,t,o)=>{o.d(t,{Zo:()=>p,kt:()=>h});var n=o(7294);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function l(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function a(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?l(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function i(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)o=l[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)o=l[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var u=n.createContext({}),s=function(e){var t=n.useContext(u),o=t;return e&&(o="function"==typeof e?e(t):a(a({},t),e)),o},p=function(e){var t=s(e.components);return n.createElement(u.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var o=e.components,r=e.mdxType,l=e.originalType,u=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=s(o),c=r,h=d["".concat(u,".").concat(c)]||d[c]||m[c]||l;return o?n.createElement(h,a(a({ref:t},p),{},{components:o})):n.createElement(h,a({ref:t},p))}));function h(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=o.length,a=new Array(l);a[0]=c;var i={};for(var u in t)hasOwnProperty.call(t,u)&&(i[u]=t[u]);i.originalType=e,i[d]="string"==typeof e?e:r,a[1]=i;for(var s=2;s<l;s++)a[s]=o[s];return n.createElement.apply(null,a)}return n.createElement.apply(null,o)}c.displayName="MDXCreateElement"},1605:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>u,contentTitle:()=>a,default:()=>m,frontMatter:()=>l,metadata:()=>i,toc:()=>s});var n=o(7462),r=(o(7294),o(4137));const l={id:"rollouts-deep-dive",title:"Rollouts",slug:"rollouts"},a="Rollouts",i={unversionedId:"deep-dives/experimenter/rollouts-deep-dive",id:"deep-dives/experimenter/rollouts-deep-dive",title:"Rollouts",description:"Want more info on rollouts?",source:"@site/docs/deep-dives/experimenter/rollouts.mdx",sourceDirName:"deep-dives/experimenter",slug:"/deep-dives/experimenter/rollouts",permalink:"/deep-dives/experimenter/rollouts",draft:!1,editUrl:"https://github.com/mozilla/experimenter-docs/edit/main/docs/deep-dives/experimenter/rollouts.mdx",tags:[],version:"current",frontMatter:{id:"rollouts-deep-dive",title:"Rollouts",slug:"rollouts"},sidebar:"sidebar",previous:{title:"Notifications",permalink:"/notifications"},next:{title:"Experimenter state and Kinto integration",permalink:"/deep-dives/experimenter/experimenter-state"}},u={},s=[{value:"What is a rollout?",id:"what-is-a-rollout",level:2},{value:"When should I use a rollout instead of an experiment?",id:"when-should-i-use-a-rollout-instead-of-an-experiment",level:4},{value:"When should I not use a rollout?",id:"when-should-i-not-use-a-rollout",level:4},{value:"Can I run a Nimbus experiment and a rollout simultaneously?",id:"can-i-run-a-nimbus-experiment-and-a-rollout-simultaneously",level:3},{value:"Are there typical rollout patterns I should follow?",id:"are-there-typical-rollout-patterns-i-should-follow",level:4},{value:"How do I create a rollout in Experimenter?",id:"how-do-i-create-a-rollout-in-experimenter",level:3},{value:"Incrementing your rollout&#39;s population percentage",id:"incrementing-your-rollouts-population-percentage",level:3},{value:"Live editability",id:"live-editability",level:4},{value:"Where can I find rollouts?",id:"where-can-i-find-rollouts",level:3},{value:"Supported platforms and minimum version targeting",id:"supported-platforms-and-minimum-version-targeting",level:3},{value:"Automated analysis",id:"automated-analysis",level:3}],p={toc:s},d="wrapper";function m(e){let{components:t,...o}=e;return(0,r.kt)(d,(0,n.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"rollouts"},"Rollouts"),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Want more info on rollouts?\nReach out to us in ",(0,r.kt)("a",{parentName:"p",href:"https://mozilla.slack.com/archives/CF94YGE03"},(0,r.kt)("inlineCode",{parentName:"a"},"#ask-experimenter"))," on Slack. ")),(0,r.kt)("p",null,"Rollouts are single-branch experiments that differ from a traditional experiment in a number of ways: "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A rollout only has a single branch."),(0,r.kt)("li",{parentName:"ul"},"A client can be enrolled in both a single experiment AND rollout for a given feature."),(0,r.kt)("li",{parentName:"ul"},"The experiment feature value takes precedence over the rollout feature value."),(0,r.kt)("li",{parentName:"ul"},"Rollouts use a separate bucketing namespace from experiments so you don't need to worry about the populations colliding."),(0,r.kt)("li",{parentName:"ul"},'Rollouts are not measurement tools.  There is no comparison branch so no way to tell "did rollout change  ____?"')),(0,r.kt)("h2",{id:"what-is-a-rollout"},"What is a rollout?"),(0,r.kt)("h4",{id:"when-should-i-use-a-rollout-instead-of-an-experiment"},"When should I use a rollout instead of an experiment?"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Launching a winning branch of an experiment faster than the trains."),(0,r.kt)("li",{parentName:"ul"},"Launching a configuration to non-experiment users during an experiment after a short period of verification."),(0,r.kt)("li",{parentName:"ul"},"Configuring different settings for a feature for different audiences remotely."),(0,r.kt)("li",{parentName:"ul"},'A "kill switch" if you want to launch a feature but then turn it off if something goes wrong.')),(0,r.kt)("h4",{id:"when-should-i-not-use-a-rollout"},"When should I not use a rollout?"),(0,r.kt)("p",null,"If the feature has not yet been extensively tested, isn't production quality, or needs a period of validation on the trains."),(0,r.kt)("h3",{id:"can-i-run-a-nimbus-experiment-and-a-rollout-simultaneously"},"Can I run a Nimbus experiment and a rollout simultaneously?"),(0,r.kt)("p",null,"It's possible, but bear in mind that rollouts are not measurement instruments. ",(0,r.kt)("strong",{parentName:"p"},"Experiments are"),"."),(0,r.kt)("p",null,"If you have uncertainty about the effect of the feature,\nyou may wish to be guided by experiment results instead of deploying the feature immediately."),(0,r.kt)("p",null,"Before you do this, you should consider:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Future experimentation needs"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Once you deploy the feature to someone, you lose the ability to observe what happens when you introduce that feature to that user."),(0,r.kt)("li",{parentName:"ul"},"Consider whether you have a need for holdbacks."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Decision criteria"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Identify the risks you're trying to mitigate with a rollout and decide whether you need multiple stages or not."),(0,r.kt)("li",{parentName:"ul"},"If you have multiple stages, how will you know whether to advance or roll back?"),(0,r.kt)("li",{parentName:"ul"},"What signals will help you make your decision? Where will they come from?"),(0,r.kt)("li",{parentName:"ul"},"If you are relying on the experiment to guide you, make sure that the timelines are compatible."),(0,r.kt)("li",{parentName:"ul"},"Rollouts are not measurement tools.  There is NO CONTROL to compare to.  There is no results page generated.  Rollouts you are potentially manually watching for bugs or user sentiment issues or observing telemetry directly.  There is no data science support for rollouts.  There is an OpMon dashboard - which that provides raw data without comparison.")))),(0,r.kt)("p",null,"You would need to:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Launch an experiment that targets a fixed portion of the population (sized appropriately for whatever you are trying to measure)"),(0,r.kt)("li",{parentName:"ol"},"When you are ready, launch a rollout using the steps below at a low percentage of the population"),(0,r.kt)("li",{parentName:"ol"},"As the rollout proceeds, consult your decision criteria. Change the percentage of the rollout by editing the population percentage.")),(0,r.kt)("p",null,"Keep in mind that if you do plan to release the experience to 100% of users, you should make sure it meets production quality standards."),(0,r.kt)("h4",{id:"are-there-typical-rollout-patterns-i-should-follow"},"Are there typical rollout patterns I should follow?"),(0,r.kt)("p",null,"This document covers ",(0,r.kt)("a",{parentName:"p",href:"https://docs.google.com/document/d/1aAlZa5RoZt_yf3-XUtffJwKVBczhJMcHCAPxRxHrNb8/edit"},"common patterns for people using a rollout to mitigate risk around technical issues, brand perception, and load capacity/service scaling"),"."),(0,r.kt)("h3",{id:"how-do-i-create-a-rollout-in-experimenter"},"How do I create a rollout in Experimenter?"),(0,r.kt)("p",null,"There are two ways to make a rollout from the Experimenter UI. When I have a \u201cwinning branch\u201d from an in-flight experiment, I want to easily set some percentage of the non-experiment population to that feature configuration. "),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},'To create a rollout from an existing experiment, a branch can be cloned and a new rollout created (similar to the way "Clone" works for experiments). This is done using the "Promote to Rollout" buttons on the Summary page of an experiment:',(0,r.kt)("p",null),(0,r.kt)("img",{title:"Promote to rollout buttons",src:"/img/deep-dives/promote-to-rollout-buttons.png",align:"center"}))),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},'A rollout can also be manually created (without cloning) through the "Create new" button on the Experimenter home screen. To mark the new item as a rollout, check the "This is a rollout" box on the "Branches" page:',(0,r.kt)("p",null),(0,r.kt)("img",{title:"Rollout checkbox",src:"/img/deep-dives/rollout-checkbox.png",align:"center"}))),(0,r.kt)("h3",{id:"incrementing-your-rollouts-population-percentage"},"Incrementing your rollout's population percentage"),(0,r.kt)("h4",{id:"live-editability"},"Live editability"),(0,r.kt)("p",null,'The population percent of a rollout ("Percentage of clients" on the Audience page) can be edited once a rollout is launched. To make changes to this field, open your rollout, and from the left sidebar click on the Audience page. From there, you will be able to make edits and save. '),(0,r.kt)("img",{title:"Population percent field is editable",src:"/img/deep-dives/population-percent-editable.png"}),(0,r.kt)("p",null,'Once an edit has been made, you will see a "Request update" button on the summary page under the available Actions:'),(0,r.kt)("img",{title:"Request a live update button",src:"/img/deep-dives/request-live-update.png"}),(0,r.kt)("p",null),(0,r.kt)("p",null,"Once you request an update, you will follow the same review flow as launching an experiment (approval on Experimenter, and approval on Remote Settings)."),(0,r.kt)("p",null),(0,r.kt)("img",{title:"Live update review flow",src:"/img/deep-dives/live-update-review.png"}),(0,r.kt)("p",null),'Multiple edits can be made to your rollout without needing to request an update, and you will be able to see if there are unpublished changes by the red "Unpublished changes" status pill that is located by "Timeline":',(0,r.kt)("p",null),(0,r.kt)("img",{title:"Unpublished changes status pill",src:"/img/deep-dives/unpublished-changes-pill.png",height:"200"}),(0,r.kt)("h3",{id:"where-can-i-find-rollouts"},"Where can I find rollouts?"),(0,r.kt)("p",null,'This can be done using the filters on the Experimenter home page. You can either sort by feature to see all experiment/rollouts for said feature, or you can search by experiment type to filter by "experiment" or "rollout": '),(0,r.kt)("img",{title:"Home page filters",src:"/img/deep-dives/home-filters.png",height:"500"}),(0,r.kt)("h3",{id:"supported-platforms-and-minimum-version-targeting"},"Supported platforms and minimum version targeting"),(0,r.kt)("p",null,"Experimenter currently supports the following platforms:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Desktop"),(0,r.kt)("li",{parentName:"ul"},"Fenix (Firefox for Android)"),(0,r.kt)("li",{parentName:"ul"},"Focus Android"),(0,r.kt)("li",{parentName:"ul"},"Firefox iOS"),(0,r.kt)("li",{parentName:"ul"},"Focus iOS")),(0,r.kt)("p",null,"The minimum version supported for rollouts on all platforms (listed above) is currently 105. See ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/mozilla/experimenter/blob/main/experimenter/experimenter/experiments/constants.py#L375"},"Experimenter")," for more details."),(0,r.kt)("h3",{id:"automated-analysis"},"Automated analysis"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The dashboards for rollouts that OpMon generates follow this URL pattern:",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"https://mozilla.cloud.looker.com/dashboards/operational_monitoring::<slug with underscores>\n")))))}m.isMDXComponent=!0}}]);