<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.3">
<link rel="search" type="application/opensearchdescription+xml" title="Experimenter Docs" href="/opensearch.xml"><title data-react-helmet="true">Jetstream Data Products | Experimenter Docs</title><meta data-react-helmet="true" property="og:url" content="https://experimenter.info/jetstream/data-products"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Jetstream Data Products | Experimenter Docs"><meta data-react-helmet="true" name="description" content="Jetstream writes analysis results and enrollments information to BigQuery. Statistics data and metadata gets exported to GCS to make it accessible to the Experimenter console."><meta data-react-helmet="true" property="og:description" content="Jetstream writes analysis results and enrollments information to BigQuery. Statistics data and metadata gets exported to GCS to make it accessible to the Experimenter console."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://experimenter.info/jetstream/data-products"><link data-react-helmet="true" rel="alternate" href="https://experimenter.info/jetstream/data-products" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://experimenter.info/jetstream/data-products" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.bf89c05e.css">
<link rel="preload" href="/assets/js/runtime~main.c7753fcd.js" as="script">
<link rel="preload" href="/assets/js/main.b30dbe1c.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Experimenter Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo-dark.svg" alt="Experimenter Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Experimenter Docs</b></a></div><div class="navbar__items navbar__items--right"><a href="https://experimenter.services.mozilla.com/nimbus/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Nimbus<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://mana.mozilla.org/wiki/display/FJT/Project+Nimbus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Mana<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/mozilla/experimenter-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Experimenter Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo-dark.svg" alt="Experimenter Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Experimenter Docs</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://experimenter.services.mozilla.com/nimbus/" target="_blank" rel="noopener noreferrer" class="menu__link"><span>Nimbus<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://mana.mozilla.org/wiki/display/FJT/Project+Nimbus" target="_blank" rel="noopener noreferrer" class="menu__link"><span>Mana<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://github.com/mozilla/experimenter-docs" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu menu--responsive thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Welcome</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/">Intro</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/contributing">Contributing</a></li><li class="menu__list-item"><a href="https://mana.mozilla.org/wiki/x/XdTNBw" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="-1"><span>Design Process<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://mana.mozilla.org/wiki/display/FJT/Nimbus+Onboarding#NimbusOnboarding-Branches" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="-1"><span>Nimbus Onboarding<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Experiment Owners</a><ul class="menu__list"><li class="menu__list-item"><a href="https://docs.google.com/document/d/155EUgzn22VTX8mFwesSROT3Z6JORSfb5VyoMoLra7ws" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="-1"><span>Experimentation with Nimbus<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://docs.google.com/document/d/155EUgzn22VTX8mFwesSROT3Z6JORSfb5VyoMoLra7ws/edit#heading=h.75kfit458h84" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="-1"><span>Monitoring and Analyzing your Experiment<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/console/custom-audiences">Custom Audiences</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/console/preview">Previewing Experiments</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Jetstream</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/jetstream/jetstream">Jetstream overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/jetstream/metrics">Metrics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/jetstream/statistics">Statistics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/jetstream/outcomes">Outcomes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/jetstream/configuration">Configuring Jetstream</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/jetstream/data-products">Jetstream Data Products</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/jetstream/operations">Jetstream Architecture and Operations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/jetstream/troubleshooting">Troubleshooting Jetstream</a></li><li class="menu__list-item"><a href="https://github.com/mozilla/jetstream" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="0"><span>GitHub Repo<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Data Scientists</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/data-scientists">Experimentation for data scientists</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Fenix Engineers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fenix-engineers">Implementing an experiment</a></li><li class="menu__list-item"><a href="https://docs.google.com/document/d/1kchihPal0__A4VOAiPJarNuZXns5KhOHHfIeIzT6zfU/edit#" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="-1"><span>Android API (proposal)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/jetstream/feature-variables-and-me">Feature Variables API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Firefox for iOS Engineers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/jetstream/feature-variables-and-me">Feature Variables API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Fenix Testing</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/android-frontend-testing">Testing on mobile</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">iOS Testing</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ios-preview-testing">Testing the preview flow on iOS</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Desktop Engineers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/desktop-feature-api">Nimbus Feature API (JS)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/desktop-migration-guide">Migration Guide (JS)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/desktop-rollouts">Desktop Rollouts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/desktop-frontend-testing">Desktop Front-end testing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Core Nimbus Team</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/android-feature-api">PROPOSAL - Android Feature API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/client-sdk-states-and-lifecycle">Client SDK States &amp; Lifecycle</a></li><li class="menu__list-item"><a href="https://github.com/mozilla/experimenter" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="-1"><span>Experimenter GH Repo<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://mana.mozilla.org/wiki/display/FJT/How+to+Launch+a+Nimbus+Experiment" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="-1"><span>How to Launch a Nimbus Experiment<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://mana.mozilla.org/wiki/pages/viewpage.action?pageId=130920248" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="-1"><span>Nimbus Data Transfer Object<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://mana.mozilla.org/wiki/display/FJT/Nimbus+Engineering#NimbusEngineering-ExperimentTelemetry" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="-1"><span>Experiment Telemetry<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://mana.mozilla.org/wiki/display/FJT/Lessons+Learned+-+Experiment+Incidents+and+Close+Calls" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="-1"><span>Lessons Learned<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_1CGd"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_3E-R"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">Jetstream Data Products</h1></header><p>Jetstream writes analysis results and enrollments information to BigQuery. Statistics data and metadata gets exported to GCS to make it accessible to the Experimenter console.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="bigquery-datasets"></a>BigQuery Datasets<a class="hash-link" href="#bigquery-datasets" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="results-datasets"></a>Results Datasets<a class="hash-link" href="#results-datasets" title="Direct link to heading">#</a></h3><p>The datasets that back the Experimenter results dashboards are available in BigQuery in the <code>mozanalysis</code> dataset in <code>moz-fx-data-experiments</code>. <a href="https://docs.telemetry.mozilla.org/datasets/jetstream.html" target="_blank" rel="noopener noreferrer">Technical documentation</a> is available in the Mozilla data docs.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="monitoring-datasets"></a>Monitoring Datasets<a class="hash-link" href="#monitoring-datasets" title="Direct link to heading">#</a></h3><p>Datasets used for monitoring the operation of Jetstream are part of the <code>monitoring</code> dataset in <code>moz-fx-data-experiments</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="error-logs"></a>Error Logs<a class="hash-link" href="#error-logs" title="Direct link to heading">#</a></h4><p>Jetstream logs errors and warning encountered during its analysis runs to <code>monitoring.logs</code>. This datasets is used as basis for the <a href="https://sql.telemetry.mozilla.org/dashboard/jetstream-errors?p_experiment=%25" target="_blank" rel="noopener noreferrer">Jetstream error dashboard</a> and for <a href="https://sql.telemetry.mozilla.org/alerts/81" target="_blank" rel="noopener noreferrer">setting up alerts</a>.</p><p>The <code>logs</code> table has the following schema:</p><table><thead><tr><th>Column name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>timestamp</code></td><td><code>TIMESTAMP</code></td><td>Timestamp of when the log event was recorded</td></tr><tr><td><code>experiment</code></td><td><code>STRING</code></td><td>Experiment slug for which event was recorded</td></tr><tr><td><code>message</code></td><td><code>STRING</code></td><td>Log message</td></tr><tr><td><code>log_level</code></td><td><code>STRING</code></td><td>Log level: ERROR, WARNING</td></tr><tr><td><code>exception</code></td><td><code>STRING</code></td><td>Raised exception object</td></tr><tr><td><code>filename</code></td><td><code>STRING</code></td><td>Name the Jetstream code file the exception was raised</td></tr><tr><td><code>func_name</code></td><td><code>STRING</code></td><td>Name the Jetstream function the exception was raised</td></tr><tr><td><code>exception_type</code></td><td><code>STRING</code></td><td>Class name the exception raised</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="query-cost"></a>Query Cost<a class="hash-link" href="#query-cost" title="Direct link to heading">#</a></h4><p>The <code>monitoring.query_cost_v1</code> dataset contains the cost of each query run when analysing experiments. The dataset is updated daily and scrapes the cost information from the BigQuery logs. The query for determining the costs is part of <a href="https://github.com/mozilla/bigquery-etl/tree/main/sql/moz-fx-data-experiments/monitoring/query_cost_v1" target="_blank" rel="noopener noreferrer">bigquery-etl</a>. The dataset is basis for the <a href="https://sql.telemetry.mozilla.org/dashboard/jetstream-cost" target="_blank" rel="noopener noreferrer">jetstream cost monitoring dashboard</a> and <a href="https://sql.telemetry.mozilla.org/alerts/91" target="_blank" rel="noopener noreferrer">alerts set up</a> to send notifications when an analysis query exceeds a certain threshold.</p><p>The <code>query_cost_v1</code> table has the following schema:</p><table><thead><tr><th>Column name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>submission_timestamp</code></td><td><code>TIMESTAMP</code></td><td>Timestamp of when the query was executed</td></tr><tr><td><code>destination_table</code></td><td><code>STRING</code></td><td>Name of the table query was writing data to</td></tr><tr><td><code>query</code></td><td><code>STRING</code></td><td>SQL of the executed query</td></tr><tr><td><code>total_bytes_processed</code></td><td><code>INT64</code></td><td>Number of bytes the query processed</td></tr><tr><td><code>cost_usd</code></td><td><code>FLOAT</code></td><td>Cost of the query in USD based on <a href="https://cloud.google.com/bigquery/pricing" target="_blank" rel="noopener noreferrer">BigQuery pricing</a></td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="experimenter-experiments"></a>Experimenter Experiments<a class="hash-link" href="#experimenter-experiments" title="Direct link to heading">#</a></h4><p>For monitoring Nimbus experiments, some common failure cases are exposed as part of the <a href="https://grafana.telemetry.mozilla.org/d/XspgvdxZz/experiment-enrollment?orgId=1" target="_blank" rel="noopener noreferrer">Experiments Enrollments Grafana dashboard</a>. These monitoring rules will require access to collected experiments enrollment data which is available in <code>monitoring.experimenter_experiments_v1</code>. This dataset is part of <a href="https://github.com/mozilla/bigquery-etl/tree/main/sql/moz-fx-data-experiments/monitoring/experimenter_experiments_v1" target="_blank" rel="noopener noreferrer">bigquery-etl</a> and updated every 10 minutes by fetching data from the Experimenter API.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="gcs-data-export"></a>GCS Data Export<a class="hash-link" href="#gcs-data-export" title="Direct link to heading">#</a></h2><p>Jetstream exports statistics data and metadata of analysed experiments to the <code>mozanalysis</code> GCS bucket.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="statistics-data"></a>Statistics Data<a class="hash-link" href="#statistics-data" title="Direct link to heading">#</a></h3><p>After each analysis run has completed, Jetstream exports the statistics results of each experiments to the <code>statistics</code> sub-directory as JSON. The JSON files follow the naming format:</p><p><code>statistics_&lt;experiment_slug&gt;_&lt;period&gt;.json</code></p><p>Each file contains a JSON object for every row in the corresponding statistics table. The JSON files are pulled in by Experimenter and used for visualizing results on the Experimenter results page.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="metadata"></a>Metadata<a class="hash-link" href="#metadata" title="Direct link to heading">#</a></h3><p>Metadata of analyzed experiments contains information about all metrics and outcomes that are computed during any analysis period. Metadata is written to JSON files into the <code>metadata</code> sub-directory with the following naming schema:</p><p><code>metadata_&lt;experiment_slug&gt;.json</code></p><p>Each JSON metadata file contains the following information:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token property">&quot;metrics&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;metric_slug&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;friendly_name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Friendly metric name&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;description&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Metric description defined in mozanalysis or jetstream-config&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;bigger_is_better&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ...</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token property">&quot;outcomes&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;outcome_slug&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;slug&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;outcome_slug&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;friendly_name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Friendly outcome name&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;description&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Outcome description defined in jetstream-config&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;metrics&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// metrics computed as part of outcome</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;metric_slug&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;another_metric_slug&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// commit hash of outcome version that was used in analysis</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;commit_hash&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;74e45eb4c3bf4ea7f1d65f888a70bfa0f6a86c1e&quot;</span><span class="token plain"> </span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ...</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Metadata of metrics and outcomes is used to show names, descriptions and whether larger numbers are better in the Experimenter results. </p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/mozilla/experimenter-docs/edit/main/docs/jetstream/data-products.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/jetstream/configuration"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Configuring Jetstream</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/jetstream/operations"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Jetstream Architecture and Operations »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#bigquery-datasets" class="table-of-contents__link">BigQuery Datasets</a><ul><li><a href="#results-datasets" class="table-of-contents__link">Results Datasets</a></li><li><a href="#monitoring-datasets" class="table-of-contents__link">Monitoring Datasets</a></li></ul></li><li><a href="#gcs-data-export" class="table-of-contents__link">GCS Data Export</a><ul><li><a href="#statistics-data" class="table-of-contents__link">Statistics Data</a></li><li><a href="#metadata" class="table-of-contents__link">Metadata</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 Mozilla Corporation</div></div></div></footer></div>
<script src="/assets/js/runtime~main.c7753fcd.js"></script>
<script src="/assets/js/main.b30dbe1c.js"></script>
</body>
</html>